{% extends 'base_shop.html' %}

{% load static %}
{% load i18n %}
{% load crispy_forms_tags %}
{% load crispy_forms_field %}

{% block head_title %}
{{ page_title }}
{% endblock %}

{% block extrahead %}
{% endblock %}

{% block extra_style %}
<link href="{% static 'css/style_shoplist.css' %}" rel="stylesheet" type="text/css">
<style>
    input#search-bar-header:focus::-webkit-input-placeholder {
        transition: opacity 0.45s ease;
        opacity: 0;
      }

      input#search-bar-header:focus::-moz-placeholder {
        transition: opacity 0.45s ease;
        opacity: 0;
      }

      input#search-bar-header:focus:-ms-placeholder {
        transition: opacity 0.45s ease;
        opacity: 0;
      }

      div,
      .profile-item {
        word-wrap: break-word;
      }
  }
</style>
{% endblock %}

{% block content %}

<!-- Test list page start -->
<div class="test-list">
    <div class="container">
        <div class="row">
            <div class="col-lg-3 col-md-3 col-sm-12">
                <div class="breadcrumb-inner">
                    <ul>
                        <li><a href="/">Home</a></li>
                        <li class="current">Test & Packages</li>
                    </ul>
                </div>
            </div>
            <div class="col-lg-9 col-md-9 col-sm-12">
                <div class="filter-bar-top">
                    <form action="/book-blood-test-online-in-india/" id="test_location_search_header_form" method="GET">
                        <input type="text" class="city-search box" placeholder="Search City" value="" name="q" readonly />
                        <input type="hidden" name="test_location_id" id="city-holder" value="100" />
                    </form>
                    <style>
                    .test-search-bar .easy-autocomplete
                    {
                        width: 100%!important;
                    }
                    </style>
                    <div class="test-search-bar">
                        <form action="/book-blood-test-online-in-india/autocomplete/" method="GET" class="autocomplete-me" id="test_search_header_form">
                            <input type="text" id="search-bar-2" class="test_search_input_field search__test_package box" placeholder="Search for a test or health package " name="q" />
                            {# <input type="hidden" name="test_package_name" id="test-package-search-holder" /> #}
                            <!--<input type="hidden" name="search_data_type" id="search_data_type" />-->
                            {# <input type="hidden" name="test_location_id" id="test_location_id_1" value="100"/> #}
                        </form>
                    </div>
                    <div class="search-error form-error"></div>
                </div>
            </div>
        </div>
        <div class="row m-t-10">
            <div class="col-lg-3 col-md-3 col-sm-12">
                <div class="book-test-filter">
                    <h3 class="filter-head">Filters</h3>
                    <div class="divider"></div>
                    <div class="accordion filter-collapse" id="filtercollapse">
                        <div class="card-header" id="headingOne">
                            <h2 class="mb-0">
                                <button class="btn btn-link btn-block text-left" type="button" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">Sort list by</button>
                            </h2>
                        </div>
                        <div id="collapseOne" class="collapse show" aria-labelledby="headingOne" data-parent="#filtercollapse">
                            <div class="card-body">
                                <div class="form-group checkbox-group">
                                    <div class="inner-group">
                                        <label class="container-check">Test
                                            <input type="checkbox" name="sort_by" value="1">
                                            <span class="checkmark"></span>
                                        </label>
                                    </div>
                                    <div class="inner-group">
                                        <label class="container-check">Packages
                                            <input type="checkbox" name="sort_by" value="2">
                                            <span class="checkmark"></span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="divider"></div>
                    <div class="accordion filter-collapse" id="filtercollapse2">
                        <div class="card-header" id="headingOne">
                            <h2 class="mb-0">
                                <button class="btn btn-link btn-block text-left" type="button" data-toggle="collapse" data-target="#collapsetwo" aria-expanded="true" aria-controls="collapseOne">Organ</button>
                            </h2>
                        </div>
                        <div id="collapsetwo" class="collapse show" aria-labelledby="headingOne" data-parent="#filtercollapse2">
                            <div class="card-body">
                                <div class="form-group checkbox-group">
                                    <div class="inner-group">
                                        <label class="container-check">Adrenal gland
                                            <input type="checkbox"  name="organs" value="2">
                                            <span class="checkmark"></span>
                                        </label>
                                    </div>
                                    <div class="inner-group">
                                        <label class="container-check">Bone
                                            <input type="checkbox"  name="organs" value="1">
                                            <span class="checkmark"></span>
                                        </label>
                                    </div>
                                    <div class="inner-group">
                                        <label class="container-check">Heart
                                            <input type="checkbox"  name="organs" value="7">
                                            <span class="checkmark"></span>
                                        </label>
                                    </div>
                                    <div class="inner-group">
                                        <label class="container-check">Kidney
                                            <input type="checkbox"  name="organs" value="5">
                                            <span class="checkmark"></span>
                                        </label>
                                    </div>
                                    <div class="inner-group">
                                        <label class="container-check">Liver
                                            <input type="checkbox"  name="organs" value="3">
                                            <span class="checkmark"></span>
                                        </label>
                                    </div>
                                    <div class="inner-group">
                                        <label class="container-check">Pancreas
                                            <input type="checkbox"  name="organs" value="4">
                                            <span class="checkmark"></span>
                                        </label>
                                    </div>
                                    <div class="inner-group">
                                        <label class="container-check">Thyroid
                                            <input type="checkbox"  name="organs" value="6">                                            
                                            <span class="checkmark"></span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="divider"></div>
                    <div class="accordion filter-collapse" id="filtercollapse3">
                        <div class="card-header" id="headingOne">
                            <h2 class="mb-0">
                                <button class="btn btn-link btn-block text-left" type="button" data-toggle="collapse" data-target="#collapsethree" aria-expanded="true" aria-controls="collapseOne">
                                    Condition
                                </button>
                            </h2>
                        </div>
                        <div id="collapsethree" class="collapse show" aria-labelledby="headingOne" data-parent="#filtercollapse3">
                            <div class="card-body">
                                <div class="form-group checkbox-group">
                                    <div class="inner-group health_conditions" style=display:block>
                                        <label class="container-check">Diabetes
                                            <input type="checkbox" name="health_conditions" value="3">
                                            <span class="checkmark"></span>
                                        </label>
                                    </div>
                                    <div class="inner-group health_conditions" style=display:block>
                                        <label class="container-check">Industrial diseases
                                            <input type="checkbox" name="health_conditions" value="4">
                                            <span class="checkmark"></span>
                                        </label>
                                    </div>
                                    <div class="inner-group health_conditions" style=display:block>
                                        <label class="container-check">Myasthenia gravis
                                            <input type="checkbox" name="health_conditions" value="1">
                                            <span class="checkmark"></span>
                                        </label>
                                    </div>
                                    <div class="inner-group health_conditions" style=display:block>
                                        <label class="container-check">Nutritional disorders
                                            <input type="checkbox" name="health_conditions" value="2">
                                            <span class="checkmark"></span>
                                        </label>
                                    </div>
                                    <!-- <small class="see-more"><a onclick="see_more();">+ See more</a></small> -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-9 col-md-9 col-sm-12">
                <div class="row package-filter-sort">
                    <div class="col-lg-12">
                        <div class="flex-inline w-100">
                            <h3>Test & Packages</h3>
                            <div class="dropdown">
                                <button class="btn dropdown-toggle sort" type="button" id="sortButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    SORT BY
                                </button>
                                <div class="dropdown-menu" aria-labelledby="sortButton">
                                    <a class="dropdown-item" onclick = sort_by('name');>A-Z</a>
                                    <a class="dropdown-item" onclick = sort_by('desc-name');>Z-A</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row package-lists">
                    {% for item in results %}
                                        <div class="col-md-6 col-sm-12 test_and_packages">
                        <div class="package" id="210056">
                            <div class="custom-head123">
                                <div class="flex-inline head">
                                    <div class="name">
                                        <div class="img">
                                            <img src="/assets/images/scope-bg.svg" class="img-fluid">
                                        </div>
                                        <a class="tool_tip" data-toggle="tooltip" data-placement="bottom" title="{{ item.title }}" href="{{ item.get_absolute_url }}">
                                            <h4 id="test-name">{{ item.title }}</h4>
                                        </a>
                                    </div>
                                </div>
                                <p class="tat">
                                    <span>TAT</span>
                                    <a class = "tool_tip" data-toggle="tooltip" data-placement="bottom"  title="Sample Cut Off : {{ item.samplecutoff }}, Report : {{ item.report }}">
                                        <strong>Sample Cut off : {{ item.samplecutoff }}, Report : {{ item.report }}</strong>
                                    </a>
                                </p>
                                <p class="specimen" style="font-size: 12px; color: #48585f;margin:0px 0 8px 10px">Specimen:
                                    <a class = "tool_tip" data-toggle="tooltip" data-placement="bottom" title="{{ item.speciment }}">
                                        <strong>{{ item.speciment }}</strong>
                                    </a>
                                </p>
                                <!-- <p class="specimen">&nbsp&nbsp</p> -->
                                <p class="price">&#8377; {{ item.price }}</p>
                            </div>
                            <div class="footer-card">
                                <div class="flex-inline p-custom">
                                    <div class="action">
                                        <form action="{% url 'shop:add_to_cart' item.pk %}" class="form-inline add-to-cart-form  " method="post">
                                            {% csrf_token %}
                                            <input type="hidden" name="csrf_test_name" value="8c2252c1bf018f773b86c877f8b10b41" />
                                            <input type="hidden" name="item_id" value="10056" />
                                            <input type="hidden" name="item_type" value="2" />
                                            <input type="hidden" name="location" value="" />
                                            <input type="hidden" name="sort_by" value="" />
                                            <input type="hidden" name="organs" value="" />
                                            <input type="hidden" name="health_cond" value="" />
                                            <input type="hidden" name="order_by" value="" />
                                            <input type="hidden" name="is_buy_now" value="1" />
                                            <button type="submit"  class="btn-3">Buy Now</button>
                                        </form>
                                        <!-- data-target="#added-to-cart"-->
                                        <form action="{% url 'shop:add_to_cart' item.pk %}" class="form-inline add-to-cart-form" method="post">
                                        {% csrf_token %}
                                            <button type="submit" class="btn-4 add-to-cart-btn  ">
                                                <img src="/assets/images/bag.svg">Add to Cart
                                            </button>
                                        </form>
                                    </div>
                                    <a class="report" href="#" download>
                                        <img src="/assets/images/download-blue.svg" class="img-fluid"> Sample Report
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endfor %}

                    {% for item in object_list %}
                    <div class="col-md-6 col-sm-12 test_and_packages">
                        <div class="package" id="210056">
                            <div class="custom-head123">
                                <div class="flex-inline head">
                                    <div class="name">
                                        <div class="img">
                                            <img src="/assets/images/scope-bg.svg" class="img-fluid">
                                        </div>
                                        <a class="tool_tip" data-toggle="tooltip" data-placement="bottom" title="{{ item.title }}" href="{{ item.get_absolute_url }}">
                                            <h4 id="test-name">{{ item.title }}</h4>
                                        </a>
                                    </div>
                                </div>
                                <p class="tat">
                                    <span>TAT</span>
                                    <a class = "tool_tip" data-toggle="tooltip" data-placement="bottom"  title="Sample Cut Off : {{ item.samplecutoff }}, Report : {{ item.report }}">
                                        <strong>Sample Cut off : {{ item.samplecutoff }}, Report : {{ item.report }}</strong>
                                    </a>
                                </p>
                                <p class="specimen" style="font-size: 12px; color: #48585f;margin:0px 0 8px 10px">Specimen: 
                                    <a class = "tool_tip" data-toggle="tooltip" data-placement="bottom" title="{{ item.speciment }}">
                                        <strong>{{ item.speciment }}</strong>
                                    </a>
                                </p>
                                <!-- <p class="specimen">&nbsp&nbsp</p> -->
                                <p class="price">&#8377; {{ item.price }}</p>
                            </div>
                            <div class="footer-card">
                                <div class="flex-inline p-custom">
                                    <div class="action">
                                        <form action="{% url 'shop:add_to_cart' item.pk %}" class="form-inline add-to-cart-form  " method="post">
                                            {% csrf_token %}
                                            <input type="hidden" name="csrf_test_name" value="8c2252c1bf018f773b86c877f8b10b41" />
                                            <input type="hidden" name="item_id" value="10056" />
                                            <input type="hidden" name="item_type" value="2" />
                                            <input type="hidden" name="location" value="" />
                                            <input type="hidden" name="sort_by" value="" />
                                            <input type="hidden" name="organs" value="" />
                                            <input type="hidden" name="health_cond" value="" />
                                            <input type="hidden" name="order_by" value="" />
                                            <input type="hidden" name="is_buy_now" value="1" />
                                            <button type="submit"  class="btn-3">Buy Now</button>
                                        </form>
                                        <!-- data-target="#added-to-cart"-->
                                        <form action="{% url 'shop:add_to_cart' item.pk %}" class="form-inline add-to-cart-form" method="post">
                                        {% csrf_token %}
                                            <button type="submit" class="btn-4 add-to-cart-btn  ">
                                                <img src="/assets/images/bag.svg">Add to Cart
                                            </button>
                                        </form>
                                    </div>
                                    <a class="report" href="#" download>
                                        <img src="/assets/images/download-blue.svg" class="img-fluid"> Sample Report
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Notification Toaster start here -->
<div class="modal fade" id="added-to-cart" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog added-cart">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">
                    <img src="/assets/images/check-circle-black-24-dp-2.svg"> Added to Cart</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body"></div>
                <div class="modal-footer">
                    <div class="action">
                        <a href="/shopping-cart/" class="btn-4">
                            <img src="/assets/images/bag.svg">Go To Cart
                        </a>
                        <a href="{{ products.get_absolute_url }}" class="btn-3">Buy Now</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}

<script src="{% static 'js/jquery.min.js' %}" type="text/javascript"></script>
<script src="{% static 'js/popper.min.js' %}" type="text/javascript"></script>
<script src="{% static 'js/bootstrap.min.js' %}" type="text/javascript"></script>
<script src="{% static 'js/select2.min.js' %}" type="text/javascript"></script>
<script src="{% static 'js/site.js' %}" type="text/javascript"></script>
<script src="{% static 'js/toastr.min.js' %}" type="text/javascript"></script>
<script src="{% static 'js/jquery.flexslider.js' %}" type="text/javascript"></script>
<script src="{% static 'js/jquery.easy-autocomplete.min.js' %}" type="text/javascript"></script>
<script src="{% static 'js/sweetalert2.min.js' %}" type="text/javascript"></script>


{% block extra_jscript %}
<script type="text/javascript">
$(document).ready(function()
{
    var data_from_url = "{{ user_order }}";
    console.log("data_from_url: ", data_from_url);


    $('#id_ticker_code').change(function(e)
    {
        e.preventDefault();
        var get_ticker = $("#id_ticker_code").val();

        $.ajax(
        {
            method: 'GET',
            url: urls,
            dataType: 'json',
            data: {
                'get_ticker': get_ticker,
                // 'get_halfway_yearly': get_halfway_yearly,
            },
            success: function(data)
            {
                if(!data["valid"])
                {
                    // console.log("data2: ", data);
                    // console.log("get_ticker2: ", get_ticker);
                    $("button").removeClass("button_hide");
                }
            },
            cache: false
        });

    });

});
</script>
{% endblock %}
